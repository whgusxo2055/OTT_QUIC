services:
  ott_quic:
    build: .
    container_name: ott_quic_dev
    ports:
      - "8443:8443"
      - "9443:9443/udp"
    volumes:
      - ./data:/app/data
      - ./web:/app/web:ro
      - ./certs/dev:/app/certs/dev:ro
    command: ["./build/ott_server"]
    environment:
      - HOST=0.0.0.0
      - PORT=8443
      - TLS_CERT_PATH=/app/certs/dev/server.crt
      - TLS_KEY_PATH=/app/certs/dev/server.key
  static_web:
    image: nginx:alpine
    container_name: ott_quic_static
    volumes:
      - ./web:/usr/share/nginx/html:ro
      - ./data:/app_data:ro
      - ./nginx.conf:/etc/nginx/nginx.conf:ro
    ports:
      - "8080:80"
    restart: unless-stopped
